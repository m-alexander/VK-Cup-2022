"use strict";(self.webpackChunkall_cups=self.webpackChunkall_cups||[]).push([[126],{3920:function(e,n,t){t.d(n,{q:function(){return s}});var a={wrapper:"Avatar_wrapper__0btH8",image:"Avatar_image__hMtyr",noImage:"Avatar_noImage__ehZfC"},r=t(6417),s=function(e){var n,t=e.account,s=e.className,o=[a.wrapper,s].filter(Boolean).join(" ");return(0,r.jsx)("div",{className:o,children:null!==t&&void 0!==t&&t.avatar?(0,r.jsx)("img",{src:t.avatar,className:a.image,alt:""}):(0,r.jsx)("div",{className:a.noImage,children:null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n[0]})})}},1126:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var a=t(4165),r=t(5861),s=t(3433),o=t(4942),c=t(1413),i=t(9439),u=t(7313),l=t(5590),d=t(5093),p=t(8467),f=t(3920),_="Head_wrapper__arfrY",h="Head_avatarAndInfo__vxand",v="Head_avatarWrapper__m2fVW",m="Head_info__Hiclg",x="Head_infoLine__fLZL1",j=t(6417),g=function(e){var n=e.onChange,t=(0,l.$G)().t,a=function(e){null===n||void 0===n||n(e.target.name,e.target.value)};return(0,j.jsx)("div",{className:_,children:(0,j.jsxs)("div",{className:h,children:[(0,j.jsx)("div",{className:v,children:(0,j.jsx)(f.q,{account:{name:"A"}})}),(0,j.jsxs)("div",{className:m,children:[(0,j.jsxs)("label",{className:x,children:[(0,j.jsx)("span",{children:t("compose.to")}),(0,j.jsx)("input",{type:"text",name:"to",onChange:a})]}),(0,j.jsxs)("label",{className:x,children:[(0,j.jsx)("span",{children:t("compose.subject")}),(0,j.jsx)("input",{type:"text",name:"subject",onChange:a})]})]})]})})},N=t(3092),b=function(e){return new Promise((function(n,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return n(a.result)},a.onerror=function(e){return t(e)}}))},w=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(n);case 2:return t=e.sent,e.next=5,fetch("/upload-image",{method:"POST",body:t});case 5:return r=e.sent,e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Z="Attaches_wrapper__PYovj",y="Attaches_addButton__YMG-p",C="Attaches_files__XX+fO",A="Attaches_fileWrapper__v0fK5",k="Attaches_file__8E64A",S="Attaches_removeFile__+nxHJ",L=function(e){var n=e.attaches,t=e.onChange,a=(0,l.$G)().t;return(0,j.jsxs)("div",{className:Z,children:[(0,j.jsxs)("div",{className:y,children:[(0,j.jsx)(N.o8,{})," ",a("compose.attaches.add"),(0,j.jsx)("input",{type:"file",value:"",onChange:function(e){var a,r=null===(a=e.target.files)||void 0===a?void 0:a[0];w(r).then((function(e){e.url&&(null===t||void 0===t||t("attaches",[].concat((0,s.Z)(n),[e.url])))}))},accept:"image/*"})]}),(0,j.jsx)("div",{className:C,children:n.map((function(e){return(0,j.jsxs)("div",{className:A,children:[(0,j.jsx)("img",{className:k,src:e,alt:""}),(0,j.jsx)("button",{type:"button",className:S,onClick:function(){return function(e){null===t||void 0===t||t("attaches",n.filter((function(n){return n!==e})))}(e)},children:"\xd7"})]},e)}))})]})},H=t(8144),P=t(6733),F=t.n(P),G=(t(1848),t(5671)),D=t(3144),I=function(){function e(n){(0,G.Z)(this,e),this.loader=n}return(0,D.Z)(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(n){return w(n).then((function(n){return e.loader.uploaded=!0,{default:n.url}}))}))}}]),e}();var $=function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new I(e)}},R="Editor_wrapper__s2lth",Y=function(e){var n=e.onChange,t={language:(0,l.$G)().i18n.language,extraPlugins:[$]};return(0,j.jsx)("div",{className:R,children:(0,j.jsx)(H.CKEditor,{data:"",onChange:function(e,t){var a=t.getData();null===n||void 0===n||n("content",a)},config:t,editor:F()})})},q=t(2135),E={wrapper:"Footer_wrapper__tAQSY",button:"Footer_button__32PP9",primary:"Footer_primary__n3SPe",secondary:"Footer_secondary__Deeuw"},M=function(e){e.isSubmitting;var n=e.onSend,t=e.onSave,a=(0,l.$G)().t;return(0,j.jsxs)("div",{className:E.wrapper,children:[(0,j.jsx)("button",{type:"button",className:[E.button,E.primary].join(" "),onClick:n,children:a("compose.footer.send")}),(0,j.jsx)("button",{type:"button",className:[E.button,E.secondary].join(" "),onClick:t,children:a("compose.footer.save")}),(0,j.jsx)(q.rU,{to:"/inbox",className:[E.button,E.secondary].join(" "),children:a("compose.footer.cancel")})]})},U="NewLetter_wrapper__83r1M",W="NewLetter_content__duSLv",B="NewLetter_top__-g592",K="NewLetter_dropZone__ZnN0+",O=t(1426),T=function(){var e=(0,l.$G)().t,n=(0,u.useState)({to:"",subject:"",attaches:[],content:""}),t=(0,i.Z)(n,2),f=t[0],_=t[1],h=function(e,n){_((function(t){return(0,c.Z)((0,c.Z)({},t),{},(0,o.Z)({},e,n))}))},v=(0,d.uI)({noClick:!0,accept:{"image/*":[]},onDrop:function(e){var n=null===e||void 0===e?void 0:e[0];w(n).then((function(e){e.url&&_((function(n){return(0,c.Z)((0,c.Z)({},n),{},{attaches:[].concat((0,s.Z)(n.attaches),[e.url])})}))}))}}),m=v.getRootProps,x=v.isDragActive,N=(0,p.s0)(),b=(0,u.useState)(!1),Z=(0,i.Z)(b,2),y=Z[0],C=Z[1],A=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return C(!0),e.next=5,(0,O.lq)(f,n);case 5:N("/"+n);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,j.jsx)("div",(0,c.Z)((0,c.Z)({},m({className:U})),{},{children:(0,j.jsxs)("div",{className:W,children:[(0,j.jsxs)("div",{className:B,children:[x&&(0,j.jsx)("div",{className:K,children:e("compose.dropZoneText")}),(0,j.jsx)(g,{onChange:h}),(0,j.jsx)(L,{attaches:f.attaches,onChange:h})]}),(0,j.jsx)(Y,{onChange:h}),(0,j.jsx)(M,{isSubmitting:y,onSend:function(){return A("sent")},onSave:function(){return A("drafts")}})]})}))}}}]);